<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui"
	template="/template/template.xhtml">

	<ui:define name="content">

		<f:metadata>
			<f:viewParam name="funcionarioId" value="#{personBean.person.id}" />
			<f:event listener="#{personBean.buscarPersonPorId()}"
				type="preRenderView" />

		</f:metadata>

		<b:well>
			<div align="center">
				<h2>Visualizando Funcionário</h2>
			</div>
		</b:well>

		<h:form>
			<b:panel title="Dados do Empresa" look="success">
				<br />
				<p:panelGrid columns="2">
					<p:outputLabel value="Empresa:" for="labelNomeEmpresa" />
					<p:outputLabel id="labelNomeEmpresa"
						value="#{personBean.person.company.nome}" />
					<p:outputLabel value="Nome Fantasia:"
						for="labelNomeFantasiaEmpresa" />
					<p:outputLabel id="labelNomeFantasiaEmpresa"
						value="#{personBean.person.company.nomeFantasia}" />
					<p:outputLabel value="CPNJ:" for="labelCnpjEmpresa" />
					<p:outputLabel id="labelCnpjEmpresa"
						value="#{personBean.person.company.cnpj}" />

				</p:panelGrid>
				<br />

				<b:button value="Mais Informações"
					outcome="/paginas/company/detalhesCompany" look="success">
					<f:param name="companyId" value="#{personBean.person.company.id}" />
				</b:button>
			</b:panel>
		</h:form>


		<h:form>
			<b:panel title="Dados do Funcionário" look="success">
				<br />
				<p:panelGrid columns="2">
					<p:outputLabel value="Funcionário:" for="labelNomeFuncionario" />
					<p:outputLabel id="labelNomeFuncionario"
						value="#{personBean.person.nome}  #{personBean.person.sobrenome}" />
					<p:outputLabel value="Tipo de Contrato:" for="labelTipoContrato" />
					<p:outputLabel id="labelTipoContrato"
						value="#{personBean.person.tipoContrato}" />
					<p:outputLabel value="Cargo" for="labelCargo" />
					<p:outputLabel id="labelCargo"
						value="#{personBean.person.cargo.nome_cargo}" />
					<p:outputLabel value="Salario Atual:" for="labelSalarioAtual" />
					<p:outputLabel id="labelSalarioAtual"
						value="R$ #{personBean.person.salario}" />
					<p:outputLabel value="Salario(Com Descontos, Gratificações):"
						for="labelSalario" />
					<p:outputLabel id="labelSalario"
						value="R$ #{personBean.person.salarioBeneficios}" />

				</p:panelGrid>
				<br />


				<b:panel title="13º Salario" look="success">
					<p:panelGrid columns="2">
						<p:outputLabel value="13º Calculado:" for="label13Calculado" />
						<p:outputLabel id="label13Calculado"
							value="#{personBean.person.retonarSimOuNao()}">
							<f:converter converterId="javax.faces.Boolean" />
						</p:outputLabel>
					</p:panelGrid>
					<br />

					<b:button value="Realizar Cálculo Décimo Terceiro Salario"
						look="success"
						outcome="/paginas/administrativo/calculo13Salario/primeiroCalculo13/calculoDecimoTerceiroSalario"
						disabled="#{personBean.person.flag13Calculado == true}">
						<f:param name="funcionarioId" value="#{personBean.person.id}" />
					</b:button>
				</b:panel>

				<b:panel title="INSS" look="success">
					<p:panelGrid columns="5">
						<p:outputLabel value="Desconta INSS:" for="labelDescontoInss" />
						<p:outputLabel id="labelDescontoInss"
							value="#{personBean.person.retornaSimOuNaoInss()}">
							<f:converter converterId="javax.faces.Boolean" />
						</p:outputLabel>
						<p:outputLabel value="INSS Calculado:" for="labelInssCalculado" />
						<p:outputLabel id="labelInssCalculado"
							value="#{personBean.person.retornaSimOuNaoInssCalculado()}">
							<f:converter converterId="javax.faces.Boolean" />
						</p:outputLabel>
						<p:outputLabel value="Tabela Inss Vazia"
							rendered="#{calculoInssBean.verificaTabelaVazia()}" />
					</p:panelGrid>
				</b:panel>
				<br />
			</b:panel>
		</h:form>


		<h:form>
			<b:panel title="Gratificações do Funcionário" look="success">
				<p:dataTable value="#{personBean.person.beneficios}"
					var="_beneficio">

					<p:column>
						<f:facet name="header">Nome</f:facet>
						<p:outputLabel value="#{_beneficio.nome}" />
					</p:column>

					<p:column rendered="#{_beneficio.valorNumerico != 0.0}">
						<f:facet name="header">Valor Fixo</f:facet>
						<p:outputLabel value="R$ #{_beneficio.valorNumerico}" />
					</p:column>

					<p:column rendered="#{_beneficio.valorPorcetagem != 0.0}">
						<f:facet name="header">Valor em Porcentagem</f:facet>
						<p:outputLabel value="% #{_beneficio.valorPorcetagem}" />
					</p:column>
				</p:dataTable>
			</b:panel>
		</h:form>

		<h:form>
			<b:panel title="Descontos do Funcionário" look="success">
				<p:dataTable value="#{personBean.person.descontos}" var="_desconto">

					<p:column>
						<f:facet name="header">Nome</f:facet>
						<p:outputLabel value="#{_desconto.nome}" />
					</p:column>

					<p:column rendered="#{_desconto.valorNumerico != 0}">
						<f:facet name="header">Valor Fixo</f:facet>
						<p:outputLabel value="R$ #{_desconto.valorNumerico}" />
					</p:column>

					<p:column rendered="#{_desconto.valorPorcetagem != 0}">
						<f:facet name="header">Valor em Porcentagem</f:facet>
						<p:outputLabel value="% #{_desconto.valorPorcetagem}" />
					</p:column>
				</p:dataTable>
			</b:panel>
		</h:form>

		<h:form>
			<b:panel title="Informações Cálculo 13º Salário" look="success"
				rendered="#{personBean.person.flag13Calculado == true}">

				<p:panelGrid columns="2">
					<h:outputLabel value="13º Salário" />
					<h:outputLabel
						value="R$ #{personBean.person.salarioDecimoTerceiro}" />
					<h:outputLabel value="Data do Ultimo Cálculo:" />
					<h:outputLabel
						value="#{personBean.person.dataCalculoDecimoTerceiroSalario}">
						<f:convertDateTime pattern="dd/MM/yyyy HH:mm" type="both" />
					</h:outputLabel>
				</p:panelGrid>

				<br />

				<b:button value="Recalcular Décimo Terceiro Salario" look="success"
					outcome="/paginas/administrativo/calculo13Salario/recalculo13Salario/reCalculoDecimoTerceiroSalario"
					disabled="#{personBean.person.flag13Calculado == false}">
					<f:param name="funcionarioId" value="#{personBean.person.id}" />
				</b:button>

			</b:panel>
		</h:form>

		<br />

		<h:form>

			<div align="center">
				<b:button value="Voltar" outcome="/paginas/person/list"
					look="primary" />
				<b:button value="Editar" outcome="/paginas/person/create"
					look="warning">
					<f:param name="funcionarioId" value="#{personBean.person.id}" />
				</b:button>
			</div>
		</h:form>


	</ui:define>
</ui:composition>
